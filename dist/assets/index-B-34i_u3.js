var Qr=Object.defineProperty;var er=e=>{throw TypeError(e)};var en=(e,t,r)=>t in e?Qr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var q=(e,t,r)=>en(e,typeof t!="symbol"?t+"":t,r),tn=(e,t,r)=>t.has(e)||er("Cannot "+r);var ce=(e,t,r)=>(tn(e,t,"read from private field"),r?r.call(e):t.get(e)),ze=(e,t,r)=>t.has(e)?er("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();const rn=!1;var Bt=Array.isArray,Ut=Array.from,nn=Object.defineProperty,be=Object.getOwnPropertyDescriptor,pr=Object.getOwnPropertyDescriptors,sn=Object.prototype,on=Array.prototype,$t=Object.getPrototypeOf;const ye=()=>{};function an(e){return e()}function Rt(e){for(var t=0;t<e.length;t++)e[t]()}const J=2,_r=4,$e=8,Ht=16,X=32,ft=64,Ct=128,ve=256,Ze=512,O=1024,oe=2048,He=4096,Y=8192,Se=16384,ln=32768,Vt=65536,un=1<<19,hr=1<<20,Ne=Symbol("$state"),cn=Symbol("");function gr(e){return e===this.v}function br(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function fn(e){return!br(e,this.v)}function dn(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function vn(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function pn(e){throw new Error("https://svelte.dev/e/effect_orphan")}function _n(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function hn(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function gn(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function bn(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function yn(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function mn(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Ee=!1;function wn(){Ee=!0}const xn=1,Sn=2,En=16,kn=2,Tn=1,Rn=2,P=Symbol();function B(e,t){var r={f:0,v:e,reactions:null,equals:gr,version:0};return r}function Qe(e){return Cn(B(e))}function yr(e,t=!1){var n;const r=B(e);return t||(r.equals=fn),Ee&&E!==null&&E.l!==null&&((n=E.l).s??(n.s=[])).push(r),r}function Cn(e){return m!==null&&m.f&J&&(z===null?Bn([e]):z.push(e)),e}function L(e,t){return m!==null&&_t()&&m.f&(J|Ht)&&(z===null||!z.includes(e))&&mn(),mr(e,t)}function mr(e,t){return e.equals(t)||(e.v=t,e.version=Mr(),wr(e,oe),_t()&&g!==null&&g.f&O&&!(g.f&X)&&(j!==null&&j.includes(e)?(G(g,oe),bt(g)):se===null?Un([e]):se.push(e))),t}function wr(e,t){var r=e.reactions;if(r!==null)for(var n=_t(),s=r.length,o=0;o<s;o++){var a=r[o],f=a.f;f&oe||!n&&a===g||(G(a,t),f&(O|ve)&&(f&J?wr(a,He):bt(a)))}}let xr=!1;function V(e,t=null,r){if(typeof e!="object"||e===null||Ne in e)return e;const n=$t(e);if(n!==sn&&n!==on)return e;var s=new Map,o=Bt(e),a=B(0);o&&s.set("length",B(e.length));var f;return new Proxy(e,{defineProperty(c,i,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&gn();var l=s.get(i);return l===void 0?(l=B(u.value),s.set(i,l)):L(l,V(u.value,f)),!0},deleteProperty(c,i){var u=s.get(i);if(u===void 0)i in c&&s.set(i,B(P));else{if(o&&typeof i=="string"){var l=s.get("length"),d=Number(i);Number.isInteger(d)&&d<l.v&&L(l,d)}L(u,P),tr(a)}return!0},get(c,i,u){var p;if(i===Ne)return e;var l=s.get(i),d=i in c;if(l===void 0&&(!d||(p=be(c,i))!=null&&p.writable)&&(l=B(V(d?c[i]:P,f)),s.set(i,l)),l!==void 0){var v=T(l);return v===P?void 0:v}return Reflect.get(c,i,u)},getOwnPropertyDescriptor(c,i){var u=Reflect.getOwnPropertyDescriptor(c,i);if(u&&"value"in u){var l=s.get(i);l&&(u.value=T(l))}else if(u===void 0){var d=s.get(i),v=d==null?void 0:d.v;if(d!==void 0&&v!==P)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return u},has(c,i){var v;if(i===Ne)return!0;var u=s.get(i),l=u!==void 0&&u.v!==P||Reflect.has(c,i);if(u!==void 0||g!==null&&(!l||(v=be(c,i))!=null&&v.writable)){u===void 0&&(u=B(l?V(c[i],f):P),s.set(i,u));var d=T(u);if(d===P)return!1}return l},set(c,i,u,l){var x;var d=s.get(i),v=i in c;if(o&&i==="length")for(var p=u;p<d.v;p+=1){var h=s.get(p+"");h!==void 0?L(h,P):p in c&&(h=B(P),s.set(p+"",h))}d===void 0?(!v||(x=be(c,i))!=null&&x.writable)&&(d=B(void 0),L(d,V(u,f)),s.set(i,d)):(v=d.v!==P,L(d,V(u,f)));var k=Reflect.getOwnPropertyDescriptor(c,i);if(k!=null&&k.set&&k.set.call(l,u),!v){if(o&&typeof i=="string"){var I=s.get("length"),b=Number(i);Number.isInteger(b)&&b>=I.v&&L(I,b+1)}tr(a)}return!0},ownKeys(c){T(a);var i=Reflect.ownKeys(c).filter(d=>{var v=s.get(d);return v===void 0||v.v!==P});for(var[u,l]of s)l.v!==P&&!(u in c)&&i.push(u);return i},setPrototypeOf(){bn()}})}function tr(e,t=1){L(e,e.v+t)}var rr,Sr,Er;function In(){if(rr===void 0){rr=window;var e=Element.prototype,t=Node.prototype;Sr=be(t,"firstChild").get,Er=be(t,"nextSibling").get,e.__click=void 0,e.__className="",e.__attributes=null,e.__styles=null,e.__e=void 0,Text.prototype.__t=void 0}}function dt(e=""){return document.createTextNode(e)}function et(e){return Sr.call(e)}function vt(e){return Er.call(e)}function _(e,t){return et(e)}function Le(e,t){{var r=et(e);return r instanceof Comment&&r.data===""?vt(r):r}}function y(e,t=1,r=!1){let n=e;for(;t--;)n=vt(n);return n}function An(e){e.textContent=""}function Dn(e){var t=J|oe;g===null?t|=ve:g.f|=hr;var r=m!==null&&m.f&J?m:null;const n={children:null,ctx:E,deps:null,equals:gr,f:t,fn:e,reactions:null,v:null,version:0,parent:r??g};return r!==null&&(r.children??(r.children=[])).push(n),n}function kr(e){var t=e.children;if(t!==null){e.children=null;for(var r=0;r<t.length;r+=1){var n=t[r];n.f&J?Wt(n):ae(n)}}}function Nn(e){for(var t=e.parent;t!==null;){if(!(t.f&J))return t;t=t.parent}return null}function Tr(e){var t,r=g;le(Nn(e));try{kr(e),t=Fr(e)}finally{le(r)}return t}function Rr(e){var t=Tr(e),r=(de||e.f&ve)&&e.deps!==null?He:O;G(e,r),e.equals(t)||(e.v=t,e.version=Mr())}function Wt(e){kr(e),Oe(e,0),G(e,Se),e.v=e.children=e.deps=e.ctx=e.reactions=null}function Cr(e){g===null&&m===null&&pn(),m!==null&&m.f&ve&&vn(),zt&&dn()}function qn(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function ke(e,t,r,n=!0){var s=(e&ft)!==0,o=g,a={ctx:E,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:e|oe,first:null,fn:t,last:null,next:null,parent:s?null:o,prev:null,teardown:null,transitions:null,version:0};if(r){var f=me;try{nr(!0),gt(a),a.f|=ln}catch(u){throw ae(a),u}finally{nr(f)}}else t!==null&&bt(a);var c=r&&a.deps===null&&a.first===null&&a.nodes_start===null&&a.teardown===null&&(a.f&hr)===0;if(!c&&!s&&n&&(o!==null&&qn(a,o),m!==null&&m.f&J)){var i=m;(i.children??(i.children=[])).push(a)}return a}function Ir(e){const t=ke($e,null,!1);return G(t,O),t.teardown=e,t}function It(e){Cr();var t=g!==null&&(g.f&X)!==0&&E!==null&&!E.m;if(t){var r=E;(r.e??(r.e=[])).push({fn:e,effect:g,reaction:m})}else{var n=pt(e);return n}}function jn(e){return Cr(),Ar(e)}function Ln(e){const t=ke(ft,e,!0);return(r={})=>new Promise(n=>{r.outro?tt(t,()=>{ae(t),n(void 0)}):(ae(t),n(void 0))})}function pt(e){return ke(_r,e,!1)}function Ar(e){return ke($e,e,!0)}function W(e){return Jt(e)}function Jt(e,t=0){return ke($e|Ht|t,e,!0)}function Pe(e,t=!0){return ke($e|X,e,!0,t)}function Dr(e){var t=e.teardown;if(t!==null){const r=zt,n=m;sr(!0),ie(null);try{t.call(null)}finally{sr(r),ie(n)}}}function Nr(e){var t=e.deriveds;if(t!==null){e.deriveds=null;for(var r=0;r<t.length;r+=1)Wt(t[r])}}function qr(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){var n=r.next;ae(r,t),r=n}}function Pn(e){for(var t=e.first;t!==null;){var r=t.next;t.f&X||ae(t),t=r}}function ae(e,t=!0){var r=!1;if((t||e.f&un)&&e.nodes_start!==null){for(var n=e.nodes_start,s=e.nodes_end;n!==null;){var o=n===s?null:vt(n);n.remove(),n=o}r=!0}qr(e,t&&!r),Nr(e),Oe(e,0),G(e,Se);var a=e.transitions;if(a!==null)for(const c of a)c.stop();Dr(e);var f=e.parent;f!==null&&f.first!==null&&jr(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function jr(e){var t=e.parent,r=e.prev,n=e.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=r))}function tt(e,t){var r=[];Yt(e,r,!0),Lr(r,()=>{ae(e),t&&t()})}function Lr(e,t){var r=e.length;if(r>0){var n=()=>--r||t();for(var s of e)s.out(n)}else t()}function Yt(e,t,r){if(!(e.f&Y)){if(e.f^=Y,e.transitions!==null)for(const a of e.transitions)(a.is_global||r)&&t.push(a);for(var n=e.first;n!==null;){var s=n.next,o=(n.f&Vt)!==0||(n.f&X)!==0;Yt(n,t,o?r:!1),n=s}}}function rt(e){Pr(e,!0)}function Pr(e,t){if(e.f&Y){Ve(e)&&gt(e),e.f^=Y;for(var r=e.first;r!==null;){var n=r.next,s=(r.f&Vt)!==0||(r.f&X)!==0;Pr(r,s?t:!1),r=n}if(e.transitions!==null)for(const o of e.transitions)(o.is_global||t)&&o.in()}}let At=!1,Dt=[];function On(){At=!1;const e=Dt.slice();Dt=[],Rt(e)}function Mn(e){At||(At=!0,queueMicrotask(On)),Dt.push(e)}function Fn(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let Ge=!1,nt=!1,st=null,me=!1,zt=!1;function nr(e){me=e}function sr(e){zt=e}let Nt=[],qe=0;let m=null;function ie(e){m=e}let g=null;function le(e){g=e}let z=null;function Bn(e){z=e}let j=null,F=0,se=null;function Un(e){se=e}let Or=1,de=!1,E=null;function Mr(){return++Or}function _t(){return!Ee||E!==null&&E.l===null}function Ve(e){var a,f;var t=e.f;if(t&oe)return!0;if(t&He){var r=e.deps,n=(t&ve)!==0;if(r!==null){var s;if(t&Ze){for(s=0;s<r.length;s++)((a=r[s]).reactions??(a.reactions=[])).push(e);e.f^=Ze}for(s=0;s<r.length;s++){var o=r[s];if(Ve(o)&&Rr(o),n&&g!==null&&!de&&!((f=o==null?void 0:o.reactions)!=null&&f.includes(e))&&(o.reactions??(o.reactions=[])).push(e),o.version>e.version)return!0}}(!n||g!==null&&!de)&&G(e,O)}return!1}function $n(e,t){for(var r=t;r!==null;){if(r.f&Ct)try{r.fn(e);return}catch{r.f^=Ct}r=r.parent}throw Ge=!1,e}function Hn(e){return(e.f&Se)===0&&(e.parent===null||(e.parent.f&Ct)===0)}function ht(e,t,r,n){if(Ge){if(r===null&&(Ge=!1),Hn(t))throw e;return}r!==null&&(Ge=!0);{$n(e,t);return}}function Fr(e){var d;var t=j,r=F,n=se,s=m,o=de,a=z,f=E,c=e.f;j=null,F=0,se=null,m=c&(X|ft)?null:e,de=!me&&(c&ve)!==0,z=null,E=e.ctx;try{var i=(0,e.fn)(),u=e.deps;if(j!==null){var l;if(Oe(e,F),u!==null&&F>0)for(u.length=F+j.length,l=0;l<j.length;l++)u[F+l]=j[l];else e.deps=u=j;if(!de)for(l=F;l<u.length;l++)((d=u[l]).reactions??(d.reactions=[])).push(e)}else u!==null&&F<u.length&&(Oe(e,F),u.length=F);return i}finally{j=t,F=r,se=n,m=s,de=o,z=a,E=f}}function Vn(e,t){let r=t.reactions;if(r!==null){var n=r.indexOf(e);if(n!==-1){var s=r.length-1;s===0?r=t.reactions=null:(r[n]=r[s],r.pop())}}r===null&&t.f&J&&(j===null||!j.includes(t))&&(G(t,He),t.f&(ve|Ze)||(t.f^=Ze),Oe(t,0))}function Oe(e,t){var r=e.deps;if(r!==null)for(var n=t;n<r.length;n++)Vn(e,r[n])}function gt(e){var t=e.f;if(!(t&Se)){G(e,O);var r=g,n=E;g=e;try{t&Ht?Pn(e):qr(e),Nr(e),Dr(e);var s=Fr(e);e.teardown=typeof s=="function"?s:null,e.version=Or}catch(o){ht(o,e,r,n||e.ctx)}finally{g=r}}}function Wn(){if(qe>1e3){qe=0;try{_n()}catch(e){if(st!==null)ht(e,st,null);else throw e}}qe++}function Jn(e){var t=e.length;if(t!==0){Wn();var r=me;me=!0;try{for(var n=0;n<t;n++){var s=e[n];s.f&O||(s.f^=O);var o=[];Br(s,o),Yn(o)}}finally{me=r}}}function Yn(e){var t=e.length;if(t!==0)for(var r=0;r<t;r++){var n=e[r];if(!(n.f&(Se|Y)))try{Ve(n)&&(gt(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null?jr(n):n.fn=null))}catch(s){ht(s,n,null,n.ctx)}}}function zn(){if(nt=!1,qe>1001)return;const e=Nt;Nt=[],Jn(e),nt||(qe=0,st=null)}function bt(e){nt||(nt=!0,queueMicrotask(zn)),st=e;for(var t=e;t.parent!==null;){t=t.parent;var r=t.f;if(r&(ft|X)){if(!(r&O))return;t.f^=O}}Nt.push(t)}function Br(e,t){var r=e.first,n=[];e:for(;r!==null;){var s=r.f,o=(s&X)!==0,a=o&&(s&O)!==0,f=r.next;if(!a&&!(s&Y))if(s&$e){if(o)r.f^=O;else try{Ve(r)&&gt(r)}catch(l){ht(l,r,null,r.ctx)}var c=r.first;if(c!==null){r=c;continue}}else s&_r&&n.push(r);if(f===null){let l=r.parent;for(;l!==null;){if(e===l)break e;var i=l.next;if(i!==null){r=i;continue e}l=l.parent}}r=f}for(var u=0;u<n.length;u++)c=n[u],t.push(c),Br(c,t)}function T(e){var u;var t=e.f,r=(t&J)!==0;if(r&&t&Se){var n=Tr(e);return Wt(e),n}if(m!==null){z!==null&&z.includes(e)&&yn();var s=m.deps;j===null&&s!==null&&s[F]===e?F++:j===null?j=[e]:j.push(e),se!==null&&g!==null&&g.f&O&&!(g.f&X)&&se.includes(e)&&(G(g,oe),bt(g))}else if(r&&e.deps===null)for(var o=e,a=o.parent,f=o;a!==null;)if(a.f&J){var c=a;f=c,a=c.parent}else{var i=a;(u=i.deriveds)!=null&&u.includes(f)||(i.deriveds??(i.deriveds=[])).push(f);break}return r&&(o=e,Ve(o)&&Rr(o)),e.v}function We(e){const t=m;try{return m=null,e()}finally{m=t}}const Kn=~(oe|He|O);function G(e,t){e.f=e.f&Kn|t}function Te(e,t=!1,r){E={p:E,c:null,e:null,m:!1,s:e,x:null,l:null},Ee&&!t&&(E.l={s:null,u:null,r1:[],r2:B(!1)})}function Re(e){const t=E;if(t!==null){const a=t.e;if(a!==null){var r=g,n=m;t.e=null;try{for(var s=0;s<a.length;s++){var o=a[s];le(o.effect),ie(o.reaction),pt(o.fn)}}finally{le(r),ie(n)}}E=t.p,t.m=!0}return{}}function Xn(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Ne in e)qt(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&Ne in r&&qt(r)}}}function qt(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let n in e)try{qt(e[n],t)}catch{}const r=$t(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const n=pr(r);for(let s in n){const o=n[s].get;if(o)try{o.call(e)}catch{}}}}}const Gn=["touchstart","touchmove"];function Zn(e){return Gn.includes(e)}let or=!1;function Qn(){or||(or=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const r of e.target.elements)(t=r.__on_r)==null||t.call(r)})},{capture:!0}))}function Ur(e){var t=m,r=g;ie(null),le(null);try{return e()}finally{ie(t),le(r)}}function es(e,t,r,n=r){e.addEventListener(t,()=>Ur(r));const s=e.__on_r;s?e.__on_r=()=>{s(),n(!0)}:e.__on_r=()=>n(!0),Qn()}const $r=new Set,jt=new Set;function ts(e,t,r,n){function s(o){if(n.capture||Ae.call(t,o),!o.cancelBubble)return Ur(()=>r.call(this,o))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Mn(()=>{t.addEventListener(e,s,n)}):t.addEventListener(e,s,n),s}function Lt(e,t,r,n,s){var o={capture:n,passive:s},a=ts(e,t,r,o);(t===document.body||t===window||t===document)&&Ir(()=>{t.removeEventListener(e,a,o)})}function Je(e){for(var t=0;t<e.length;t++)$r.add(e[t]);for(var r of jt)r(e)}function Ae(e){var b;var t=this,r=t.ownerDocument,n=e.type,s=((b=e.composedPath)==null?void 0:b.call(e))||[],o=s[0]||e.target,a=0,f=e.__root;if(f){var c=s.indexOf(f);if(c!==-1&&(t===document||t===window)){e.__root=t;return}var i=s.indexOf(t);if(i===-1)return;c<=i&&(a=c)}if(o=s[a]||e.target,o!==t){nn(e,"currentTarget",{configurable:!0,get(){return o||r}});var u=m,l=g;ie(null),le(null);try{for(var d,v=[];o!==null;){var p=o.assignedSlot||o.parentNode||o.host||null;try{var h=o["__"+n];if(h!==void 0&&!o.disabled)if(Bt(h)){var[k,...I]=h;k.apply(o,[e,...I])}else h.call(o,e)}catch(x){d?v.push(x):d=x}if(e.cancelBubble||p===t||p===null)break;o=p}if(d){for(let x of v)queueMicrotask(()=>{throw x});throw d}}finally{e.__root=t,delete e.currentTarget,ie(u),le(l)}}}function rs(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function ot(e,t){var r=g;r.nodes_start===null&&(r.nodes_start=e,r.nodes_end=t)}function D(e,t){var r=(t&Tn)!==0,n=(t&Rn)!==0,s,o=!e.startsWith("<!>");return()=>{s===void 0&&(s=rs(o?e:"<!>"+e),r||(s=et(s)));var a=n?document.importNode(s,!0):s.cloneNode(!0);if(r){var f=et(a),c=a.lastChild;ot(f,c)}else ot(a,a);return a}}function at(e=""){{var t=dt(e+"");return ot(t,t),t}}function it(){var e=document.createDocumentFragment(),t=document.createComment(""),r=dt();return e.append(t,r),ot(t,r),e}function w(e,t){e!==null&&e.before(t)}function ee(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=r,e.nodeValue=r==null?"":r+"")}function ns(e,t){return ss(e,t)}const pe=new Map;function ss(e,{target:t,anchor:r,props:n={},events:s,context:o,intro:a=!0}){In();var f=new Set,c=l=>{for(var d=0;d<l.length;d++){var v=l[d];if(!f.has(v)){f.add(v);var p=Zn(v);t.addEventListener(v,Ae,{passive:p});var h=pe.get(v);h===void 0?(document.addEventListener(v,Ae,{passive:p}),pe.set(v,1)):pe.set(v,h+1)}}};c(Ut($r)),jt.add(c);var i=void 0,u=Ln(()=>{var l=r??t.appendChild(dt());return Pe(()=>{if(o){Te({});var d=E;d.c=o}s&&(n.$$events=s),i=e(l,n)||{},o&&Re()}),()=>{var p;for(var d of f){t.removeEventListener(d,Ae);var v=pe.get(d);--v===0?(document.removeEventListener(d,Ae),pe.delete(d)):pe.set(d,v)}jt.delete(c),l!==r&&((p=l.parentNode)==null||p.removeChild(l))}});return os.set(i,u),i}let os=new WeakMap;function K(e,t,r=!1){var n=e,s=null,o=null,a=P,f=r?Vt:0,c=!1;const i=(l,d=!0)=>{c=!0,u(d,l)},u=(l,d)=>{a!==(a=l)&&(a?(s?rt(s):d&&(s=Pe(()=>d(n))),o&&tt(o,()=>{o=null})):(o?rt(o):d&&(o=Pe(()=>d(n))),s&&tt(s,()=>{s=null})))};Jt(()=>{c=!1,t(i),c||u(null,null)},f)}function Pt(e,t){return t}function as(e,t,r,n){for(var s=[],o=t.length,a=0;a<o;a++)Yt(t[a].e,s,!0);var f=o>0&&s.length===0&&r!==null;if(f){var c=r.parentNode;An(c),c.append(r),n.clear(),ne(e,t[0].prev,t[o-1].next)}Lr(s,()=>{for(var i=0;i<o;i++){var u=t[i];f||(n.delete(u.k),ne(e,u.prev,u.next)),ae(u.e,!f)}})}function Ot(e,t,r,n,s,o=null){var a=e,f={flags:t,items:new Map,first:null};{var c=e;a=c.appendChild(dt())}var i=null,u=!1;Jt(()=>{var l=r(),d=Bt(l)?l:l==null?[]:Ut(l),v=d.length;if(!(u&&v===0)){u=v===0;{var p=m;is(d,f,a,s,t,(p.f&Y)!==0,n)}o!==null&&(v===0?i?rt(i):i=Pe(()=>o(a)):i!==null&&tt(i,()=>{i=null})),r()}})}function is(e,t,r,n,s,o,a,f){var c=e.length,i=t.items,u=t.first,l=u,d,v=null,p=[],h=[],k,I,b,x;for(x=0;x<c;x+=1){if(k=e[x],I=a(k,x),b=i.get(I),b===void 0){var Ie=l?l.e.nodes_start:r;v=us(Ie,t,v,v===null?t.first:v.next,k,I,x,n,s),i.set(I,v),p=[],h=[],l=v.next;continue}if(ls(b,k,x),b.e.f&Y&&rt(b.e),b!==l){if(d!==void 0&&d.has(b)){if(p.length<h.length){var Z=h[0],U;v=Z.prev;var A=p[0],M=p[p.length-1];for(U=0;U<p.length;U+=1)ar(p[U],Z,r);for(U=0;U<h.length;U+=1)d.delete(h[U]);ne(t,A.prev,M.next),ne(t,v,A),ne(t,M,Z),l=Z,v=M,x-=1,p=[],h=[]}else d.delete(b),ar(b,l,r),ne(t,b.prev,b.next),ne(t,b,v===null?t.first:v.next),ne(t,v,b),v=b;continue}for(p=[],h=[];l!==null&&l.k!==I;)(o||!(l.e.f&Y))&&(d??(d=new Set)).add(l),h.push(l),l=l.next;if(l===null)continue;b=l}p.push(b),v=b,l=b.next}if(l!==null||d!==void 0){for(var te=d===void 0?[]:Ut(d);l!==null;)(o||!(l.e.f&Y))&&te.push(l),l=l.next;var C=te.length;if(C>0){var N=c===0?r:null;as(t,te,N,i)}}g.first=t.first&&t.first.e,g.last=v&&v.e}function ls(e,t,r,n){mr(e.v,t),e.i=r}function us(e,t,r,n,s,o,a,f,c,i){var u=(c&xn)!==0,l=(c&En)===0,d=u?l?yr(s):B(s):s,v=c&Sn?B(a):a,p={i:v,v:d,k:o,a:null,e:null,prev:r,next:n};try{return p.e=Pe(()=>f(e,d,v),xr),p.e.prev=r&&r.e,p.e.next=n&&n.e,r===null?t.first=p:(r.next=p,r.e.next=p.e),n!==null&&(n.prev=p,n.e.prev=p.e),p}finally{}}function ar(e,t,r){for(var n=e.next?e.next.e.nodes_start:r,s=t?t.e.nodes_start:r,o=e.e.nodes_start;o!==n;){var a=vt(o);s.before(o),o=a}}function ne(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function cs(e,t,r){pt(()=>{var n=We(()=>t(e,r==null?void 0:r())||{});if(n!=null&&n.destroy)return()=>n.destroy()})}function fs(e,t){var r=e.__attributes??(e.__attributes={});r.checked!==(r.checked=t??void 0)&&(e.checked=t)}function lt(e,t,r,n){var s=e.__attributes??(e.__attributes={});s[t]!==(s[t]=r)&&(t==="style"&&"__styles"in e&&(e.__styles={}),t==="loading"&&(e[cn]=r),r==null?e.removeAttribute(t):typeof r!="string"&&ds(e).includes(t)?e[t]=r:e.setAttribute(t,r))}var ir=new Map;function ds(e){var t=ir.get(e.nodeName);if(t)return t;ir.set(e.nodeName,t=[]);for(var r,n=e,s=Element.prototype;s!==n;){r=pr(n);for(var o in r)r[o].set&&t.push(o);n=$t(n)}return t}function ut(e,t,r){var n=e.__className,s=vs(t);(n!==s||xr)&&(t==null&&!r?e.removeAttribute("class"):e.className=s,e.__className=s)}function vs(e,t){return(e??"")+""}function ps(e,t,r=t){var n=_t();es(e,"input",s=>{var o=s?e.defaultValue:e.value;if(o=xt(e)?St(o):o,r(o),n&&o!==(o=t())){var a=e.selectionStart,f=e.selectionEnd;e.value=o??"",f!==null&&(e.selectionStart=a,e.selectionEnd=Math.min(f,e.value.length))}}),We(t)==null&&e.value&&r(xt(e)?St(e.value):e.value),Ar(()=>{var s=t();xt(e)&&s===St(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function xt(e){var t=e.type;return t==="number"||t==="range"}function St(e){return e===""?null:+e}function yt(e=!1){const t=E,r=t.l.u;if(!r)return;let n=()=>Xn(t.s);if(e){let s=0,o={};const a=Dn(()=>{let f=!1;const c=t.s;for(const i in c)c[i]!==o[i]&&(o[i]=c[i],f=!0);return f&&s++,s});n=()=>T(a)}r.b.length&&jn(()=>{lr(t,n),Rt(r.b)}),It(()=>{const s=We(()=>r.m.map(an));return()=>{for(const o of s)typeof o=="function"&&o()}}),r.a.length&&It(()=>{lr(t,n),Rt(r.a)})}function lr(e,t){if(e.l.s)for(const r of e.l.s)T(r);t()}function Hr(e,t,r){if(e==null)return t(void 0),ye;const n=We(()=>e.subscribe(t,r));return n.unsubscribe?()=>n.unsubscribe():n}function je(e,t,r){const n=r[t]??(r[t]={store:null,source:yr(void 0),unsubscribe:ye});if(n.store!==e)if(n.unsubscribe(),n.store=e??null,e==null)n.source.v=void 0,n.unsubscribe=ye;else{var s=!0;n.unsubscribe=Hr(e,o=>{s?n.source.v=o:L(n.source,o)}),s=!1}return T(n.source)}function Kt(e,t){return e.set(t),t}function mt(){const e={};return Ir(()=>{for(var t in e)e[t].unsubscribe()}),e}function Vr(e,t,r,n){var l;var s=!Ee||(r&kn)!==0,o;o=e[t];var a=((l=be(e,t))==null?void 0:l.set)??void 0,f=n,c=!0,i=()=>(c&&(c=!1,f=n),f);o===void 0&&n!==void 0&&(a&&s&&hn(),o=i(),a&&a(o));var u;return u=()=>{var d=e[t];return d===void 0?i():(c=!0,d)},u}function Xt(e){E===null&&Fn(),Ee&&E.l!==null?_s(E).m.push(e):It(()=>{const t=We(e);if(typeof t=="function")return t})}function _s(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const hs="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(hs);wn();class ur extends Error{constructor(r,n,s){const o=r.status||r.status===0?r.status:"",a=r.statusText||"",f=`${o} ${a}`.trim(),c=f?`status code ${f}`:"an unknown error";super(`Request failed with ${c}: ${n.method} ${n.url}`);q(this,"response");q(this,"request");q(this,"options");this.name="HTTPError",this.response=r,this.request=n,this.options=s}}class Wr extends Error{constructor(r){super(`Request timed out: ${r.method} ${r.url}`);q(this,"request");this.name="TimeoutError",this.request=r}}const De=e=>e!==null&&typeof e=="object",Ke=(...e)=>{for(const t of e)if((!De(t)||Array.isArray(t))&&t!==void 0)throw new TypeError("The `options` argument must be an object");return Gt({},...e)},Jr=(e={},t={})=>{const r=new globalThis.Headers(e),n=t instanceof globalThis.Headers,s=new globalThis.Headers(t);for(const[o,a]of s.entries())n&&a==="undefined"||a===void 0?r.delete(o):r.set(o,a);return r};function Xe(e,t,r){return Object.hasOwn(t,r)&&t[r]===void 0?[]:Gt(e[r]??[],t[r]??[])}const Yr=(e={},t={})=>({beforeRequest:Xe(e,t,"beforeRequest"),beforeRetry:Xe(e,t,"beforeRetry"),afterResponse:Xe(e,t,"afterResponse"),beforeError:Xe(e,t,"beforeError")}),Gt=(...e)=>{let t={},r={},n={};for(const s of e)if(Array.isArray(s))Array.isArray(t)||(t=[]),t=[...t,...s];else if(De(s)){for(let[o,a]of Object.entries(s))De(a)&&o in t&&(a=Gt(t[o],a)),t={...t,[o]:a};De(s.hooks)&&(n=Yr(n,s.hooks),t.hooks=n),De(s.headers)&&(r=Jr(r,s.headers),t.headers=r)}return t},gs=(()=>{let e=!1,t=!1;const r=typeof globalThis.ReadableStream=="function",n=typeof globalThis.Request=="function";if(r&&n)try{t=new globalThis.Request("https://empty.invalid",{body:new globalThis.ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type")}catch(s){if(s instanceof Error&&s.message==="unsupported BodyInit type")return!1;throw s}return e&&!t})(),bs=typeof globalThis.AbortController=="function",ys=typeof globalThis.ReadableStream=="function",ms=typeof globalThis.FormData=="function",zr=["get","post","put","patch","head","delete"],ws={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},Et=2147483647,Kr=Symbol("stop"),xs={json:!0,parseJson:!0,stringifyJson:!0,searchParams:!0,prefixUrl:!0,retry:!0,timeout:!0,hooks:!0,throwHttpErrors:!0,onDownloadProgress:!0,fetch:!0},Ss={method:!0,headers:!0,body:!0,mode:!0,credentials:!0,cache:!0,redirect:!0,referrer:!0,referrerPolicy:!0,integrity:!0,keepalive:!0,signal:!0,window:!0,dispatcher:!0,duplex:!0,priority:!0},Es=e=>zr.includes(e)?e.toUpperCase():e,ks=["get","put","head","delete","options","trace"],Ts=[408,413,429,500,502,503,504],Rs=[413,429,503],cr={limit:2,methods:ks,statusCodes:Ts,afterStatusCodes:Rs,maxRetryAfter:Number.POSITIVE_INFINITY,backoffLimit:Number.POSITIVE_INFINITY,delay:e=>.3*2**(e-1)*1e3},Cs=(e={})=>{if(typeof e=="number")return{...cr,limit:e};if(e.methods&&!Array.isArray(e.methods))throw new Error("retry.methods must be an array");if(e.statusCodes&&!Array.isArray(e.statusCodes))throw new Error("retry.statusCodes must be an array");return{...cr,...e}};async function Is(e,t,r,n){return new Promise((s,o)=>{const a=setTimeout(()=>{r&&r.abort(),o(new Wr(e))},n.timeout);n.fetch(e,t).then(s).catch(o).then(()=>{clearTimeout(a)})})}async function As(e,{signal:t}){return new Promise((r,n)=>{t&&(t.throwIfAborted(),t.addEventListener("abort",s,{once:!0}));function s(){clearTimeout(o),n(t.reason)}const o=setTimeout(()=>{t==null||t.removeEventListener("abort",s),r()},e)})}const Ds=(e,t)=>{const r={};for(const n in t)!(n in Ss)&&!(n in xs)&&!(n in e)&&(r[n]=t[n]);return r};class ct{constructor(t,r={}){q(this,"request");q(this,"abortController");q(this,"_retryCount",0);q(this,"_input");q(this,"_options");var n,s;if(this._input=t,this._options={...r,headers:Jr(this._input.headers,r.headers),hooks:Yr({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},r.hooks),method:Es(r.method??this._input.method),prefixUrl:String(r.prefixUrl||""),retry:Cs(r.retry),throwHttpErrors:r.throwHttpErrors!==!1,timeout:r.timeout??1e4,fetch:r.fetch??globalThis.fetch.bind(globalThis)},typeof this._input!="string"&&!(this._input instanceof URL||this._input instanceof globalThis.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&typeof this._input=="string"){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(bs){this.abortController=new globalThis.AbortController;const o=this._options.signal??this._input.signal;o!=null&&o.aborted&&this.abortController.abort(o==null?void 0:o.reason),o==null||o.addEventListener("abort",()=>{this.abortController.abort(o.reason)}),this._options.signal=this.abortController.signal}if(gs&&(this._options.duplex="half"),this._options.json!==void 0&&(this._options.body=((s=(n=this._options).stringifyJson)==null?void 0:s.call(n,this._options.json))??JSON.stringify(this._options.json),this._options.headers.set("content-type",this._options.headers.get("content-type")??"application/json")),this.request=new globalThis.Request(this._input,this._options),this._options.searchParams){const a="?"+(typeof this._options.searchParams=="string"?this._options.searchParams.replace(/^\?/,""):new URLSearchParams(this._options.searchParams).toString()),f=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,a);(ms&&this._options.body instanceof globalThis.FormData||this._options.body instanceof URLSearchParams)&&!(this._options.headers&&this._options.headers["content-type"])&&this.request.headers.delete("content-type"),this.request=new globalThis.Request(new globalThis.Request(f,{...this.request}),this._options)}}static create(t,r){const n=new ct(t,r),s=async()=>{if(typeof n._options.timeout=="number"&&n._options.timeout>Et)throw new RangeError(`The \`timeout\` option cannot be greater than ${Et}`);await Promise.resolve();let f=await n._fetch();for(const c of n._options.hooks.afterResponse){const i=await c(n.request,n._options,n._decorateResponse(f.clone()));i instanceof globalThis.Response&&(f=i)}if(n._decorateResponse(f),!f.ok&&n._options.throwHttpErrors){let c=new ur(f,n.request,n._options);for(const i of n._options.hooks.beforeError)c=await i(c);throw c}if(n._options.onDownloadProgress){if(typeof n._options.onDownloadProgress!="function")throw new TypeError("The `onDownloadProgress` option must be a function");if(!ys)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return n._stream(f.clone(),n._options.onDownloadProgress)}return f},a=n._options.retry.methods.includes(n.request.method.toLowerCase())?n._retry(s):s();for(const[f,c]of Object.entries(ws))a[f]=async()=>{n.request.headers.set("accept",n.request.headers.get("accept")||c);const i=await a;if(f==="json"){if(i.status===204||(await i.clone().arrayBuffer()).byteLength===0)return"";if(r.parseJson)return r.parseJson(await i.text())}return i[f]()};return a}_calculateRetryDelay(t){if(this._retryCount++,this._retryCount>this._options.retry.limit||t instanceof Wr)throw t;if(t instanceof ur){if(!this._options.retry.statusCodes.includes(t.response.status))throw t;const n=t.response.headers.get("Retry-After")??t.response.headers.get("RateLimit-Reset")??t.response.headers.get("X-RateLimit-Reset")??t.response.headers.get("X-Rate-Limit-Reset");if(n&&this._options.retry.afterStatusCodes.includes(t.response.status)){let s=Number(n)*1e3;Number.isNaN(s)?s=Date.parse(n)-Date.now():s>=Date.parse("2024-01-01")&&(s-=Date.now());const o=this._options.retry.maxRetryAfter??s;return s<o?s:o}if(t.response.status===413)throw t}const r=this._options.retry.delay(this._retryCount);return Math.min(this._options.retry.backoffLimit,r)}_decorateResponse(t){return this._options.parseJson&&(t.json=async()=>this._options.parseJson(await t.text())),t}async _retry(t){try{return await t()}catch(r){const n=Math.min(this._calculateRetryDelay(r),Et);if(this._retryCount<1)throw r;await As(n,{signal:this._options.signal});for(const s of this._options.hooks.beforeRetry)if(await s({request:this.request,options:this._options,error:r,retryCount:this._retryCount})===Kr)return;return this._retry(t)}}async _fetch(){for(const n of this._options.hooks.beforeRequest){const s=await n(this.request,this._options);if(s instanceof Request){this.request=s;break}if(s instanceof Response)return s}const t=Ds(this.request,this._options),r=this.request;return this.request=r.clone(),this._options.timeout===!1?this._options.fetch(r,t):Is(r,t,this.abortController,this._options)}_stream(t,r){const n=Number(t.headers.get("content-length"))||0;let s=0;return t.status===204?(r&&r({percent:1,totalBytes:n,transferredBytes:s},new Uint8Array),new globalThis.Response(null,{status:t.status,statusText:t.statusText,headers:t.headers})):new globalThis.Response(new globalThis.ReadableStream({async start(o){const a=t.body.getReader();r&&r({percent:0,transferredBytes:0,totalBytes:n},new Uint8Array);async function f(){const{done:c,value:i}=await a.read();if(c){o.close();return}if(r){s+=i.byteLength;const u=n===0?0:s/n;r({percent:u,transferredBytes:s,totalBytes:n},i)}o.enqueue(i),await f()}await f()}}),{status:t.status,statusText:t.statusText,headers:t.headers})}}/*! MIT License © Sindre Sorhus */const Mt=e=>{const t=(r,n)=>ct.create(r,Ke(e,n));for(const r of zr)t[r]=(n,s)=>ct.create(n,Ke(e,s,{method:r}));return t.create=r=>Mt(Ke(r)),t.extend=r=>(typeof r=="function"&&(r=r(e??{})),Mt(Ke(e,r))),t.stop=Kr,t},ue=Mt(),_e=[];function Ce(e,t=ye){let r=null;const n=new Set;function s(f){if(br(e,f)&&(e=f,r)){const c=!_e.length;for(const i of n)i[1](),_e.push(i,e);if(c){for(let i=0;i<_e.length;i+=2)_e[i][0](_e[i+1]);_e.length=0}}}function o(f){s(f(e))}function a(f,c=ye){const i=[f,c];return n.add(i),n.size===1&&(r=t(s,o)||ye),f(e),()=>{n.delete(i),n.size===0&&r&&(r(),r=null)}}return{set:s,update:o,subscribe:a}}function Q(e){let t;return Hr(e,r=>t=r)(),t}var Fe,Be;class Ns{constructor(){ze(this,Fe,Qe(V([{auto_login:!1,new_state:!1,storage_state:"",service:"",custom_url:"",scrape:!1,allow_delay:!0,execute:!1}])));ze(this,Be,Qe(0));q(this,"toggleAutoLogin",()=>{this.pageState[0].auto_login=!this.pageState[0].auto_login});q(this,"toggleAllowDelay",()=>{this.pageState[0].allow_delay=!this.pageState[0].allow_delay})}get pageState(){return T(ce(this,Fe))}set pageState(t){L(ce(this,Fe),V(t))}get pageId(){return T(ce(this,Be))}set pageId(t){L(ce(this,Be),V(t))}update(t,r){this.pageId=t,this.pageState[0]=r}}Fe=new WeakMap,Be=new WeakMap;var Ue;const fe=class fe{constructor(){q(this,"instanceStore",{});ze(this,Ue,Qe(V([])))}get iterableInstanceStore(){return T(ce(this,Ue))}set iterableInstanceStore(t){L(ce(this,Ue),V(t))}static getManager(){return fe.instance===null&&(fe.instance=new fe),fe.instance}addInstance(t,r){this.instanceStore[t]=r,this.createIterable()}instanceCount(){return this.iterableInstanceStore.length}clear(){this.iterableInstanceStore=[],this.instanceStore={}}createIterable(){let t=[];for(let r in this.instanceStore)t[r]=`#${r}:${this.instanceStore[r]}`;this.iterableInstanceStore=t}};Ue=new WeakMap,q(fe,"instance",null);let Ft=fe;const R=new Ns,Zt=Ce([]),Me=Ce(["default"]),wt=Ft.getManager(),we=Ce("template"),xe=Ce(!1);class qs{constructor(t){q(this,"displayDiv",null);q(this,"taskId",0);t!==null&&(this.displayDiv=document.getElementById(t))}init(t){if(this.displayDiv!==null){console.error("A div has already been assigned displayDiv");return}if(t===null){this.displayDiv=null;return}this.displayDiv=document.getElementById(t)}log(t,r=[]){if(this.displayDiv===null)return;r.length==0&&(r=["text-[#f4f1de]"]);const n=this.createChildDiv(t,r);let s=null;this.displayDiv.children.length>2&&(s=this.displayDiv.children[this.displayDiv.children.length-1]),this.displayDiv.appendChild(n),s&&s.getClientRects()[0].top<=window.innerHeight&&n.scrollIntoView(!1)}success(t,r=[]){this.log(t,[...r,"text-[#81b29a]"])}serverlog(t,r=[]){this.log(t,[...r,"text-[#f2cc8f]"])}error(t,r=[]){this.log(t,[...r,"text-[#e07a5f]"])}createChildDiv(t,r=[]){const n=document.createElement("div"),s=this.createTime(),o=document.createElement("span");return r.length&&o.classList.add(...r),o.innerText=`${t}`,n.appendChild(s),n.appendChild(o),n}createTime(){const t=document.createElement("span");return t.classList.add("select-none","text-[#3d405b]"),t.innerText=`[${Date().split(" ")[4]}] `,t}}const S=new qs(null),Qt=Ce(0);let Xr=[];const fr=Ce(null);async function Gr(e){fr.update(r=>(r!==null&&r.close(),Xr.push(`${e}`),new WebSocket(`ws://localhost:8000/scrapy/${e}`)));const t=Q(fr);t&&(t.onopen=()=>{S.success("Connected to "+t.url)},t.onmessage=r=>{const n=JSON.parse(r.data);console.log(n);const s=window.indexedDB.open(`${e}`);let o;s.onerror=()=>{console.error("already exists")},s.onupgradeneeded=()=>{const a=s.result;if(a.objectStoreNames.contains("msgs"))return;const f=a.createObjectStore("msgs",{keyPath:"MsgId"});f.createIndex("Author","Author",{unique:!1}),f.createIndex("ReplyTo","ReplyTo",{unique:!1}),f.createIndex("Content","Content",{unique:!1})},s.onsuccess=()=>{o=s.result,console.log("created");const a=o.transaction("msgs","readwrite");a.onerror=()=>console.error("Transaction failed");const f=a.objectStore("msgs");n.forEach(c=>{const i=f.add(c);i.onsuccess=()=>console.log("Written"),i.onerror=()=>console.log("Failed to write")}),o.close()}})}async function kt(){const e=!R.pageState[0].scrape;console.log(e,R.pageId);const r=await(await ue.post("http://localhost:8000/api/pagestate/scrape",{json:{id:R.pageId,status:e}})).json();if(!r.success){S.error("Failed to update page state with id: "+R.pageId,["font-bold"]),S.error("Server Response: "+r.error);return}R.pageState[0].scrape=e,S.serverlog("Scraping status set to: "+e)}async function Tt(){const t=await(await ue.post("http://localhost:8000/api/pagestate/savestoragestate",{json:{id:R.pageId,pageState:R.pageState[0]},timeout:2e4})).json();if(!t.success){S.error("Unable to store state",["font-bold"]),S.error("Server Response: "+t.error);return}xe.set(!1);const r=Q(Me);Me.set([...r,`${Q(we)}.state`]),S.success("Storage state "+Q(we)+" saved"),we.set("template")}async function js(){const t=await(await ue.post("http://localhost:8000/api/pagestate/update",{json:{id:R.pageId,pageState:R.pageState[0]}})).json();t.success||(S.error("Failed to update page state with id: "+R.pageId,["font-bold"]),S.error("Server Response: "+t.error))}async function Ls(){S.log("Killing browser");const t=await(await ue.post("http://localhost:8000/api/appstate/status",{json:{status:!1}})).json();t.success?(wt.clear(),Xr.forEach(r=>{const n=window.indexedDB.deleteDatabase(r);n.onsuccess=()=>console.log("Successfully Deleted Database: ",r),n.onerror=()=>console.error("Unable to delete Database ",r),n.onblocked=()=>console.warn("Database deletion is blocked. Close all connections to proceed.")}),S.success("Assassination Completed")):(S.error("Assasination Failed",["font-bold"]),S.error("Server Response: "+t.error))}async function Ps(e){const r=await(await ue.get(`http://localhost:8000/api/appstate?id=${e}`)).json();r.data===null?(S.error("Error fetching info of page with id: "+e,["font-bold"]),S.error("Server Response: "+r.error)):(R.update(r.data.id,r.data.pageState),Gr(r.data.ws_addr))}async function Os(){const e=document.getElementById("ServiceDisplay").selectedIndex;let t="";Q(xe)?t=Q(we):t=document.getElementById("StorageDisplay").value;const r=document.getElementById("ContextURL").value,n=document.getElementById("Autologin").checked,s={serviceIndex:e,newStorageState:Q(xe),storageState:t,contextURL:r,autoLogIn:n};S.log("Launching new page: "+Q(Zt)[e]+"::"+t);const a=await(await ue.post("http://localhost:8000/api/appstate",{json:s,timeout:2e4})).json();a.data===null?(S.error("Failed to launch new page",["font-bold"]),S.error("Server Response: "+a.error)):(R.update(a.data.id,a.data.pageState),wt.addInstance(a.data.id,a.data.pageState.service),S.success("Launched new page"),Gr(a.data.ws_addr))}async function dr(){const t=await(await ue.get("http://localhost:8000/api/appstate/service")).json();return t.data===null?(S.error("Error fetching services",["font-bold"]),S.error("Server Response: "+t.error),[]):(Zt.set(t.data.service),t.data.service)}async function vr(){const t=await(await ue.get("http://localhost:8000/api/appstate/storagestate")).json();return t.data===null?(S.error("Error fetching storage states",["font-bold"]),S.error("Server Response: "+t.error),[]):(Me.set(t.data.storageState),Q(Me).length==0&&xe.set(!0),t.data.storageState)}var Ms=(e,t)=>{L(t,!0)},Fs=(e,t)=>{e.key==="Enter"&&L(t,!1)},Bs=D('<div class="flex w-full"><div class="w-3/4"><input class="italic w-full outline-none border-none bg-transparent text-center p-1" type="text"></div> <div class="rounded-xl rounded-l-none border-0 text-[#3d405b] bg-[#171717] text-center p-1">.state</div></div>'),Us=D('<div class="cursor-text px-2 border-none"> </div>'),$s=D('<div id="NewStateName" aria-hidden="true" role="button" tabindex="0"><!></div>');function Hs(e){const t=mt(),r=()=>je(we,"$stateName",t);let n=Qe(!1);function s(i){i.focus()}var o=$s();ut(o,"flex justify-center w-48"),o.__click=[Ms,n];var a=_(o);{var f=i=>{var u=Bs(),l=_(u),d=_(l);d.__keydown=[Fs,n],pt(()=>ps(d,r,v=>Kt(we,v))),cs(d,v=>s==null?void 0:s(v)),Lt("blur",d,()=>{L(n,!1)}),w(i,u)},c=i=>{var u=Us(),l=_(u);W(()=>ee(l,`${r()??""}.state`)),w(i,u)};K(a,i=>{T(n)?i(f):i(c,!1)})}w(e,o)}Je(["click","keydown"]);var Vs=()=>{},Ws=D("<option> </option>"),Js=()=>{},Ys=D("<option> </option>"),zs=D('<select class="w-48 rounded-md p-1 bg-[#babbf1] text-[#171717]" id="StorageDisplay"></select>'),Ks=()=>Os(),Xs=()=>Ls(),Gs=D('<div class="w-[676px] h-[211px] border-[#babbf1] border-2 m-10"><div class="text-xl w-full min-h-[32px] px-[25px] py-[5px] border-b-2 border-b-[#babbf1] flex justify-between mb-4"><div class="flex gap-x-[10px] text-[#babbf1] select-none"><img src="ri-user-settings-line.svg" alt=""> AppControls</div> <div class="flex gap-x-6 justify-center"><div class="flex justify-center"><img src="svg-path.svg" alt=""></div> <div><img src="ri-close-large-line.svg" alt="" title="Close"></div></div></div> <div class="h-[80%] w-full"><div class="w-full flex justify-around pb-2"><div class="w-[40%] flex justify-between items-center gap-4 px-6"><span>Service:</span> <select class="rounded-md p-1 bg-[#babbf1] text-[#171717]" id="ServiceDisplay"></select></div> <div class="w-[60%] flex justify-between items-center gap-4 px-6"><span>Storage:</span> <!> <button class="p-1 px-3 text-xl font-mono rounded-md text-[#171717] bg-[#babbf1]"><!></button></div></div> <div class="w-full flex justify-around pb-2"><div class="w-[40%] flex justify-between items-center gap-4 px-6"><label for="Autologin"><span>Auto Log in:</span></label> <input type="checkbox" class="p-2 outline-none" name="autologin" id="Autologin"></div> <div class="w-[60%] flex justify-around items-center gap-4 px-6"><span>URL:</span> <input type="text" class="p-1 outline-none bg-[#babbf1] text-[#171717] rounded-sm" name="contextURL" id="ContextURL"></div></div> <div class="w-full flex justify-around mt-2 px-12"><button class="bg-[#81b29a] active:italic p-2 rounded-md text-gray-50">Start New Context</button> <button class="bg-[#e07a5f] active:italic p-2 rounded-md text-gray-50">Close Bowser</button></div></div></div>');function Zs(e,t){Te(t,!1);const r=mt(),n=()=>je(Zt,"$services",r),s=()=>je(xe,"$newStateWanted",r),o=()=>je(Me,"$storageStates",r);Xt(async()=>{dr(),await vr()}),yt();var a=Gs(),f=y(_(a),2),c=_(f),i=_(c),u=y(_(i),2);u.__change=[Vs],Ot(u,5,n,Pt,(C,N)=>{var re=Ws(),$={},H=_(re);W(()=>{$!==($=T(N))&&(re.value=(re.__value=T(N))==null?"":T(N)),ee(H,T(N))}),w(C,re)});var l=y(i,2),d=y(_(l),2);{var v=C=>{Hs(C)},p=C=>{var N=zs();N.__change=[Js],Ot(N,5,o,Pt,(re,$)=>{var H=Ys(),Ye={},Zr=_(H);W(()=>{Ye!==(Ye=T($))&&(H.value=(H.__value=T($))==null?"":T($)),ee(Zr,T($))}),w(re,H)}),Lt("focus",N,async()=>await vr()),w(C,N)};K(d,C=>{s()?C(v):C(p,!1)})}var h=y(d,2);h.__click=()=>{if(s()&&o().length==0){console.log("No existing states");return}xe.set(!s())};var k=_(h);{var I=C=>{var N=at("+");w(C,N)},b=C=>{var N=at("-");w(C,N)};K(k,C=>{s()?C(b,!1):C(I)})}var x=y(c,2),Ie=_(x),Z=_(Ie),U=y(Z,2),A=y(x,2),M=_(A);M.__click=[Ks];var te=y(M,2);te.__click=[Xs],W(()=>{lt(h,"title",s()?"Select from Existing States":"Add New State"),lt(Z,"title",s()?"Cannot automate in a New State":"Automate service login"),U.disabled=s()}),Lt("focus",u,async()=>await dr()),w(e,a),Re()}Je(["change","click"]);var Qs=D('<div class="flex flex-col"><div class="flex w-full justify-center"><span class="text-[#babbf1]"> </span> :</div> <div> </div></div>'),eo=(e,t)=>{t(),js()},to=D('<div aria-hidden="true" class="flex"><div><span class="select-none cursor-pointer"> </span> <input type="checkbox"></div></div>');function he(e,t){Te(t,!0);const r=Vr(t,"inputId",3,"");let n="",s="",o=r()==="auto_login"?R.toggleAutoLogin:R.toggleAllowDelay;t.category=="Service ID"&&(n="italic text-zinc-400",s="#");var a=it(),f=Le(a);{var c=u=>{var l=Qs(),d=_(l),v=_(d),p=_(v),h=y(d,2),k=_(h);W(()=>{ee(p,t.category),ut(h,`flex justify-around ${n??""} ${(t.detail===!0?"text-[#81b29a]":"text-[#e07a5f]")??""}`),ee(k,`${s??""}${t.detail??""}`)}),w(u,l)},i=u=>{var l=it(),d=Le(l);{var v=p=>{var h=to();h.__click=[eo,o];var k=_(h),I=_(k),b=_(I),x=y(I,2);W(()=>{ee(b,`${t.category??""} :`),lt(x,"id",r()),fs(x,t.detail)}),w(p,h)};K(d,p=>{t.detailType==="checkbox"&&p(v)},!0)}w(u,l)};K(f,u=>{t.detailType==="text"?u(c):u(i,!1)})}w(e,a),Re()}Je(["click"]);var ro=async e=>await Ps(Number(e.target.value)),no=D("<option> </option>"),so=D('<div class="w-[839px] h-[378px] border-[#babbf1] border-2"><div class="w-full min-h-[32px] px-[25px] py-[5px] border-b-2 border-b-[#babbf1] flex justify-between mb-2"><div class="text-xl flex gap-x-[10px] text-[#babbf1] select-none"><img src="ri-file-settings-line.svg" alt=""> PageControls</div> <div><select name="page" id="PageSelction" class="rounded-md px-4 bg-[#babbf1] text-[#babbf1] bg-opacity-20"></select></div> <div class="flex gap-x-6 justify-center"><div class="flex justify-center"><img src="svg-path.svg" alt=""></div> <div><img src="ri-close-large-line.svg" alt="" title="Close"></div></div></div> <div class="w-full h-[85%] flex px-4"><div class="h-full w-[40%] space-y-4 border-r-2 border-r-[#babbf1]"><div class="underline font-bold">Status</div> <!> <!> <!> <!></div> <div class="px-4 h-full flex flex-col justify-between"><div class="flex flex-col space-y-4"><!> <!></div> <div class="flex flex-col space-y-4"><button class="p-2 rounded-lg bg-[#f2cc8f] text-[#171717]">Pause Playwritght</button> <button class="p-2 rounded-lg bg-[#f2cc8f] text-[#171717]">Save State</button> <button class="p-2 rounded-lg bg-[#81b29a]"><!></button></div></div></div></div>');function oo(e,t){Te(t,!1),yt();var r=so(),n=_(r),s=y(_(n),2),o=_(s);o.__change=[ro],Ot(o,5,()=>wt.iterableInstanceStore,Pt,(A,M,te)=>{var C=it(),N=Le(C);{var re=$=>{var H=no();H.value=(H.__value=te)==null?"":te;var Ye=_(H);W(()=>ee(Ye,T(M))),w($,H)};K(N,$=>{T(M)!==void 0&&$(re)})}w(A,C)});var a=y(n,2),f=_(a),c=y(_(f),2);he(c,{category:"Service ID",detailType:"text",get detail(){return R.pageId}});var i=y(c,2);he(i,{category:"Service",detailType:"text",get detail(){return R.pageState[0].service}});var u=y(i,2);he(u,{category:"Storage State",detailType:"text",get detail(){return R.pageState[0].storage_state}});var l=y(u,2);he(l,{category:"Scrape Status",detailType:"text",get detail(){return R.pageState[0].scrape}});var d=y(f,2),v=_(d),p=_(v);he(p,{category:"Auto Login",detailType:"checkbox",get detail(){return R.pageState[0].auto_login},inputId:"auto_login"});var h=y(p,2);he(h,{category:"Allow Human Like Delay",detailType:"checkbox",get detail(){return R.pageState[0].allow_delay},inputId:"allow_delay"});var k=y(v,2),I=_(k);I.__click=function(...A){};var b=y(I,2);b.__click=function(...A){Tt==null||Tt.apply(this,A)};var x=y(b,2);x.__click=function(...A){kt==null||kt.apply(this,A)};var Ie=_(x);{var Z=A=>{var M=at("Stop Scrape");w(A,M)},U=A=>{var M=at("Start Scrape");w(A,M)};K(Ie,A=>{R.pageState[0].scrape?A(Z):A(U,!1)})}w(e,r),Re()}Je(["change","click"]);var ao=(e,t,r)=>Kt(Qt,V(r.idx)),io=D("<span> </span>"),lo=D("<span> </span>"),uo=D('<button aria-hidden="true"><!></button>'),co=D("<div></div>");function ge(e,t){const r=mt(),n=()=>je(Qt,"$selectedConsole",r),s=Vr(t,"type",3,"display");var o=it(),a=Le(o);{var f=i=>{var u=uo();u.__click=[ao,n,t];var l=_(u);{var d=p=>{var h=io(),k=_(h);W(()=>ee(k,`${t.idx+1}» ${t.name??""}`)),w(p,h)},v=p=>{var h=lo(),k=_(h);W(()=>ee(k,`${t.idx+1}: ${t.name??""}`)),w(p,h)};K(l,p=>{n()==t.idx?p(d):p(v,!1)})}W(()=>ut(u,`text-xl p-1 px-4 cursor-pointer ${n()==t.idx?"bg-[#282c34] text-[#babbf1]":"text-[#ebebeb]"}`)),w(i,u)},c=i=>{var u=co();W(()=>{lt(u,"id",`${t.name}`),ut(u,`font-mono overflow-hidden h-full overflow-y-auto ${n()==t.idx?"block":"hidden"}`)}),w(i,u)};K(a,i=>{s()=="button"?i(f):i(c,!1)})}w(e,o)}Je(["click"]);var fo=D('<div class="w-full h-[4%] min-h-[28px] font-mono"><div id="tab" class="flex"><div class="bg-[#282c34] p-1 px-4 z-10 flex items-center"><img src="ri-terminal-box-line.svg" alt="term"></div> <!> <!> <!></div></div> <div class="overflow-hidden h-[96%] p-2"><!> <!> <!></div>',1);function vo(e,t){Te(t,!1),Xt(()=>{S.init("console-log"),S.log("Console Initialised")}),yt();var r=fo(),n=Le(r),s=_(n),o=y(_(s),2);ge(o,{type:"button",name:"logs",idx:0});var a=y(o,2);ge(a,{type:"button",name:"data",idx:1});var f=y(a,2);ge(f,{type:"button",name:"terminal",idx:2});var c=y(n,2),i=_(c);ge(i,{type:"display",name:"console-log",idx:0});var u=y(i,2);ge(u,{type:"display",name:"console-date",idx:1});var l=y(u,2);ge(l,{type:"display",name:"console-terminal",idx:2}),w(e,r),Re()}var po=D('<div class="flex justify-center"><!></div>'),_o=D('<main class="flex w-svw h-svh text-[#f4f1de]"><div class="h-full w-[65%] bg-[#3d405b] p-2 flex-col justify-center items-center"><div class="text-center text-3xl text-[#f4f1de]">ControlPanel</div> <div class="flex justify-center"><!></div> <!></div> <div class="h-full w-[35%] bg-[#171717]"><!></div></main>');function ho(e,t){Te(t,!1),mt();let r=!1;Xt(()=>{document.addEventListener("keydown",l=>{if(r&&l.key>="1"&&l.key<="9"){const d=parseInt(l.key,10);if(d<1||d>3)return;Kt(Qt,d-1)}r=!1,l.altKey&&l.key.toLowerCase()=="a"&&(r=!0,console.log("Active Modi"))})}),yt();var n=_o(),s=_(n),o=y(_(s),2),a=_(o);Zs(a,{});var f=y(o,2);{var c=l=>{var d=po(),v=_(d);oo(v,{}),w(l,d)};K(f,l=>{wt.instanceCount()!=0&&l(c)})}var i=y(s,2),u=_(i);vo(u,{}),w(e,n),Re()}ns(ho,{target:document.getElementById("app")});
